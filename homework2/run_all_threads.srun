#!/bin/bash

# THREAD COUNTS TO TEST
THREADS=(1 2 4 8 16 32 64 128)

for t in "${THREADS[@]}"; do
    echo "Submitting job with $t threads..."

    # Submit prefix.srun and override OMP_NUM_THREADS for that job
    sbatch \
        --export=OMP_NUM_THREADS=$t \
        --output=output/prefix_${t}threads.out \
        --error=output/prefix_${t}threads.err \
        prefix.srun
done

echo "All jobs submitted."